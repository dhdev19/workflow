<div class="table-responsive">
    <table class="table table-hover">
        <thead class="table-light">
            <tr>
                <th>Created</th>
                <th>Deadline</th>
                <th>Task Name</th>
                <th>Department</th>
                <th>Priority</th>
                <th>Status</th>
                <th>Members</th>
                <th>Client</th>
                <th>Remark</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for task in tasks %}
            <tr>
                <td>{{ task.created_at.strftime('%Y-%m-%d %H:%M') if task.created_at else 'N/A' }}</td>
                <td>
                    {% if task.deadline %}
                        {{ task.deadline.strftime('%Y-%m-%d %H:%M') }}
                        {% if task.deadline < datetime.now() and task.status != 'COMPLETED' %}
                            <span class="badge bg-danger">Overdue</span>
                        {% endif %}
                    {% else %}
                        N/A
                    {% endif %}
                </td>
                <td>
                    <a href="{{ url_for('tasks.view_task', task_id=task.id) }}" class="text-decoration-none">
                        {{ task.task_name }}
                    </a>
                </td>
                <td>{{ task.department.name if task.department else 'N/A' }}</td>
                <td>
                    {% if task.priority == 'URGENT' %}
                        <span class="badge badge-urgent">URGENT</span>
                    {% elif task.priority == 'IMPORTANT' %}
                        <span class="badge badge-important">IMPORTANT</span>
                    {% else %}
                        <span class="badge badge-daily">DAILY TASK</span>
                    {% endif %}
                </td>
                <td>
                    {% if task.status == 'COMPLETED' %}
                        <span class="badge bg-success">{{ task.status }}</span>
                    {% elif task.status == 'PENDING' %}
                        <span class="badge bg-warning text-dark">{{ task.status }}</span>
                    {% else %}
                        <span class="badge bg-secondary">{{ task.status }}</span>
                    {% endif %}
                </td>
                <td>
                    {% for assignment in task.assignments[:3] %}
                        <span class="badge bg-info">{{ assignment.user.full_name }}</span>
                    {% endfor %}
                    {% if task.assignments|length > 3 %}
                        <span class="badge bg-secondary">+{{ task.assignments|length - 3 }} more</span>
                    {% endif %}
                </td>
                <td>{{ task.client_name or 'N/A' }}</td>
                <td>
                    {% if task.remark %}
                        <span class="text-muted" title="{{ task.remark }}">
                            {{ task.remark[:30] }}{% if task.remark|length > 30 %}...{% endif %}
                        </span>
                    {% else %}
                        N/A
                    {% endif %}
                </td>
                <td>
                    <a href="{{ url_for('tasks.view_task', task_id=task.id) }}" class="btn btn-sm btn-outline-primary">
                        <i class="bi bi-eye"></i>
                    </a>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="10" class="text-center text-muted">No tasks found</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

